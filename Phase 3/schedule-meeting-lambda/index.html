
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://shaundano.github.io/project-elephant/Phase%203/schedule-meeting-lambda/">
      
      
        <link rel="prev" href="../frontend/">
      
      
        <link rel="next" href="../api-gateway/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Schedule-meeting Lambda - Project Elephant Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#schedule-meeting-lambda" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Project Elephant Documentation" class="md-header__button md-logo" aria-label="Project Elephant Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Project Elephant Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Schedule-meeting Lambda
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/shaundano/project-elephant" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    shaundano/project-elephant
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Project Elephant Documentation" class="md-nav__button md-logo" aria-label="Project Elephant Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Project Elephant Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/shaundano/project-elephant" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    shaundano/project-elephant
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Introduction
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Introduction/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Introduction/jitsi-meet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Jitsi Meet
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Introduction/nice-dcv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NICE DCV
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Introduction/open-world-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Open World Agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Introduction/windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Introduction/amazon-web-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Amazon Web Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Phase 1 - Setting up EC2, DCV and OCAP
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Phase 1 - Setting up EC2, DCV and OCAP
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%201/ec2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EC2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%201/dcv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DCV
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%201/ocap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OCAP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%201/fork-discussion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fork Discussion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Phase 2 - OCAP Automation and S3
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Phase 2 - OCAP Automation and S3
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%202/s3-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    S3 Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%202/iam-aws-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IAM Roles and AWS Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%202/ocap-scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OCAP Scripts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%202/task-scheduler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Scheduler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Phase 3 - First Lambda, DynamoDB, and Frontend
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Phase 3 - First Lambda, DynamoDB, and Frontend
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dynamodb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DynamoDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../frontend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Frontend
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Schedule-meeting Lambda
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Schedule-meeting Lambda
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-imports" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Imports
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#critical-code-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Critical Code Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Critical Code Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initial Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#meeting-id-and-jitsi-url-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Meeting ID and Jitsi URL Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventbridge-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventBridge Scheduler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamodb-payload" class="md-nav__link">
    <span class="md-ellipsis">
      
        DynamoDB Payload
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-response" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lambda Response
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iam-roles" class="md-nav__link">
    <span class="md-ellipsis">
      
        IAM Roles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IAM Roles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#role-1-awslambdabasicexecutionrole" class="md-nav__link">
    <span class="md-ellipsis">
      
        Role 1: AWSLambdaBasicExecutionRole
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#role-2-schedulerlogic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Role 2: SchedulerLogic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#role-3-write-meetings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Role 3: Write Meetings
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eventbridge-scheduler-role" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventBridge Scheduler Role
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Gateway and Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Phase 4 - Spin Up, DNS and Frontend Redirect
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Phase 4 - Spin Up, DNS and Frontend Redirect
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%204/certificates-cloudflare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Certificates in Cloudflare
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%204/cloudflare-token/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting a Token from Cloudflare
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%204/launch-ec2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Launch EC2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%204/dns-watchdog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ElephantDNSWatchdog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%204/frontend-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Frontend Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%204/get-dcv-url/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Get DCV URL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%204/spin-down/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spin Down
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Phase 5 - KioskUser and Health Check
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Phase 5 - KioskUser and Health Check
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%205/kioskuser-task-scheduler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating KioskUser and Task Scheduler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%205/get-meeting-link/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Get Meeting Link
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%205/health-check/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Health Check
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%205/master-launch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Master Launch, Invisible Shell, and Fallback
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%205/autologon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Autologon
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Phase 6 - Optimizations and Config
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Phase 6 - Optimizations and Config
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%206/dcv-performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DCV Performance Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%206/dcv-fullscreen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DCV Fullscreen Display
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%206/auto-enable-media/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auto-Enable Webcam and Microphone
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%206/mix-ai-email/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Automated Email summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Phase%206/applocker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AppLocker Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-imports" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Imports
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#critical-code-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Critical Code Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Critical Code Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Initial Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#meeting-id-and-jitsi-url-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Meeting ID and Jitsi URL Generation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventbridge-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventBridge Scheduler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamodb-payload" class="md-nav__link">
    <span class="md-ellipsis">
      
        DynamoDB Payload
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-response" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lambda Response
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iam-roles" class="md-nav__link">
    <span class="md-ellipsis">
      
        IAM Roles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IAM Roles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#role-1-awslambdabasicexecutionrole" class="md-nav__link">
    <span class="md-ellipsis">
      
        Role 1: AWSLambdaBasicExecutionRole
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#role-2-schedulerlogic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Role 2: SchedulerLogic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#role-3-write-meetings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Role 3: Write Meetings
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eventbridge-scheduler-role" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventBridge Scheduler Role
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="schedule-meeting-lambda">Schedule-meeting Lambda</h1>
<p>When you create your first Lambda, the only thing you should ensure is that your runtime is Python. I went with Python 3.14.</p>
<h2 id="key-imports">Key Imports</h2>
<p>The most important import for our Lambda is <code>boto3</code>. This allows us to perform read / write operations with other AWS services.</p>
<h2 id="critical-code-components">Critical Code Components</h2>
<p>Here are the critical pieces of this Lambda:</p>
<h3 id="initial-setup">Initial Setup</h3>
<div class="highlight"><span class="filename">Initial Setup</span><pre><span></span><code><span class="n">dynamodb</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="p">)</span>
<span class="n">scheduler</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;scheduler&#39;</span><span class="p">)</span>

<span class="n">TABLE_NAME</span> <span class="o">=</span> <span class="s1">&#39;elephant-meetings&#39;</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">dynamodb</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="n">TABLE_NAME</span><span class="p">)</span>
<span class="n">JITSI_DOMAIN</span> <span class="o">=</span> <span class="s1">&#39;meet.christardy.com&#39;</span>
</code></pre></div>
<ul>
<li><code>elephant-meetings</code> is the name of my DynamoDB table</li>
<li><code>scheduler</code> refers to EventBridge Scheduler. More on that in a second.</li>
<li><code>JITSI_DOMAIN</code> refers to the domain that I selected to host my Jitsi server on.</li>
</ul>
<h3 id="meeting-id-and-jitsi-url-generation">Meeting ID and Jitsi URL Generation</h3>
<div class="highlight"><span class="filename">Meeting ID and Jitsi URL Generation</span><pre><span></span><code><span class="n">meeting_id</span> <span class="o">=</span> <span class="n">generate_id</span><span class="p">()</span>
<span class="n">jitsi_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="n">JITSI_DOMAIN</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">meeting_id</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Awesome - Jitsi Meeting Provisioning</p>
<p>Remember that Jitsi provisions meetings on the fly. The way I decided to do this is to just use the random primary key from DynamoDB as the meeting room name. That ensures that there won't be any collisions and I don't need to actually talk to the Jitsi service at all to get a meeting room.</p>
</div>
<h3 id="eventbridge-scheduler">EventBridge Scheduler</h3>
<div class="highlight"><span class="filename">EventBridge Scheduler</span><pre><span></span><code><span class="n">launch_dt</span> <span class="o">=</span> <span class="n">meet_dt</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> 
<span class="n">launch_iso</span> <span class="o">=</span> <span class="n">launch_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Scheduling Launch for: </span><span class="si">{</span><span class="n">launch_iso</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">scheduler</span><span class="o">.</span><span class="n">create_schedule</span><span class="p">(</span>
    <span class="n">Name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;launch-</span><span class="si">{</span><span class="n">meeting_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">ScheduleExpression</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;at(</span><span class="si">{</span><span class="n">launch_iso</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
    <span class="n">Target</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;Arn&#39;</span><span class="p">:</span> <span class="n">launcher_arn</span><span class="p">,</span>
        <span class="s1">&#39;RoleArn&#39;</span><span class="p">:</span> <span class="n">scheduler_role</span><span class="p">,</span>
        <span class="s1">&#39;Input&#39;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;meeting_id&#39;</span><span class="p">:</span> <span class="n">meeting_id</span><span class="p">})</span>
    <span class="p">},</span>
    <span class="n">FlexibleTimeWindow</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Mode&#39;</span><span class="p">:</span> <span class="s1">&#39;OFF&#39;</span><span class="p">},</span>
    <span class="n">ActionAfterCompletion</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span>
<span class="p">)</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Note - EventBridge Scheduler</p>
<p>This is a good time to talk about EventBridge Scheduler. It's a really intelligent AWS service that you can call directly from boto3. It has a GUI just like any other service in AWS, but we are instead calling it programmatically.</p>
<p>What it does is you can set a timed trigger independent of the Lambda, and have it execute specific behaviour. What I use it for is if a Lambda should call another Lambda, you can use EventBridge.</p>
</div>
<p>In this case, the payload from the frontend has a meeting time, which is when the teacher has scheduled the tutoring session. <code>launch_dt</code> is defined as that meeting time minus 10 minutes (EC2's need time to spin up, and we will be running our own health checks).</p>
<p>Here are a few more details about the EventBridge object we're creating:</p>
<ul>
<li><strong><code>Name</code></strong>: Assigns a unique identifier to this schedule using the <code>meeting_id</code>.</li>
<li><strong><code>ScheduleExpression</code></strong>: Sets the exact execution time (<code>at(...)</code>) using an ISO timestamp.</li>
<li><strong><code>Target</code></strong>: Defines what to trigger (the <code>launcher_arn</code>), the permissions to do so (<code>RoleArn</code>), and the JSON payload (<code>Input</code>) to send.</li>
<li><strong><code>FlexibleTimeWindow</code></strong>: <code>OFF</code> ensures that Amazon executes it at the exact time specified.</li>
<li><strong><code>ActionAfterCompletion</code></strong>: Automatically deletes the schedule entry after it runs once.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Testing - EventBridge Scheduler</p>
<p>Something that is useful for testing: if you schedule a meeting in the past, EventBridge scheduler will trigger right away.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Note - Safety Net Scheduler</p>
<p>There's another scheduler that handles the meeting safety net, which will be covered later in these docs, but in short, if no one shows up to the scheduled meeting after 15 minutes, it will kill the EC2 instances provisioned so that you don't rack up a huge AWS bill.</p>
</div>
<h3 id="dynamodb-payload">DynamoDB Payload</h3>
<p>Here's the payload in <code>schedule-meeting</code>:</p>
<div class="highlight"><span class="filename">DynamoDB Payload</span><pre><span></span><code><span class="n">item</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">meeting_id</span><span class="p">,</span> 
    <span class="s1">&#39;teacher_name&#39;</span><span class="p">:</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;teacher_name&#39;</span><span class="p">),</span>
    <span class="s1">&#39;student_name&#39;</span><span class="p">:</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;student_name&#39;</span><span class="p">),</span>
    <span class="s1">&#39;meet_time&#39;</span><span class="p">:</span> <span class="n">meet_time_str</span><span class="p">,</span> 
    <span class="s1">&#39;jitsi_url&#39;</span><span class="p">:</span> <span class="n">jitsi_url</span><span class="p">,</span>
    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;SCHEDULED&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;created_at&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Note that this is the payload from the frontend, plus a few more params created in this function.</li>
</ul>
<h3 id="lambda-response">Lambda Response</h3>
<div class="highlight"><span class="filename">Lambda Response</span><pre><span></span><code><span class="k">return</span> <span class="p">{</span>
    <span class="s1">&#39;statusCode&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="s1">&#39;headers&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Access-Control-Allow-Origin&#39;</span><span class="p">:</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Access-Control-Allow-Methods&#39;</span><span class="p">:</span> <span class="s1">&#39;OPTIONS,POST&#39;</span>
    <span class="p">},</span>
    <span class="s1">&#39;body&#39;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Session scheduled!&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">meeting_id</span><span class="p">,</span>
        <span class="s1">&#39;jitsi_url&#39;</span><span class="p">:</span> <span class="n">jitsi_url</span><span class="p">,</span>
        <span class="s1">&#39;teacher_link&#39;</span><span class="p">:</span> <span class="n">teacher_link</span><span class="p">,</span> 
        <span class="s1">&#39;student_link&#39;</span><span class="p">:</span> <span class="n">student_link</span> 
    <span class="p">})</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Once this function is successful, it's not just gonna send back "success" to the frontend. It's going to create the links for both the teacher and student to join their provisioned EC2 instances.</li>
<li>The frontend receives that <code>statusCode</code> 200 and will redirect to a modal providing the meeting links.</li>
</ul>
<p>You'll notice that the links follow a specific format:</p>
<div class="highlight"><span class="filename">Link Format</span><pre><span></span><code><span class="n">teacher_link</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">frontend_base_url</span><span class="si">}</span><span class="s2">?id=</span><span class="si">{</span><span class="n">meeting_id</span><span class="si">}</span><span class="s2">&amp;role=teacher&quot;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Testing - Lambda Function</p>
<p>To test this Lambda, there is a test panel in the Lambda service. You can send a mock payload, which will actually write to your DB.</p>
</div>
<h2 id="iam-roles">IAM Roles</h2>
<p>You'll need a special IAM role for this Lambda. We previously set up IAM roles in Phase 2, so I'll speed through this.</p>
<h3 id="role-1-awslambdabasicexecutionrole">Role 1: AWSLambdaBasicExecutionRole</h3>
<ul>
<li>Pre-defined by AWS</li>
</ul>
<h3 id="role-2-schedulerlogic">Role 2: SchedulerLogic</h3>
<div class="highlight"><span class="filename">SchedulerLogic Policy</span><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Statement&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;Sid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DatabaseWrite&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Effect&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dynamodb:PutItem&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:dynamodb:*:*:table/elephant-meetings&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;Sid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CreateTimer&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Effect&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;scheduler:CreateSchedule&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;*&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;Sid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;HandOverKeyCard&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Effect&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;iam:PassRole&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::034489661489:role/ElephantSchedulerRole&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="role-3-write-meetings">Role 3: Write Meetings</h3>
<div class="highlight"><span class="filename">Write Meetings Policy</span><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Statement&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;Sid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VisualEditor0&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Effect&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dynamodb:PutItem&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:dynamodb:*:034489661489:table/*&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="environment-variables">Environment Variables</h2>
<p>Also, you're going to need a few environment variables:</p>
<table>
<thead>
<tr>
<th><strong>Key</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LAUNCHER_ARN</code></td>
</tr>
<tr>
<td><code>SAFETY_NET_ARN</code></td>
</tr>
<tr>
<td><code>SCHEDULER_ROLE_ARN</code></td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Note - Environment Variables</p>
<p>You can skip or leave the top two blank since we haven't written them yet. We're going to define a specific IAM role for the EventBridge scheduler within the schedule-meeting Lambda.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning - IAM Role Names</p>
<p>WARNING: they do NOT have the same roles, despite having similar names!</p>
</div>
<h2 id="eventbridge-scheduler-role">EventBridge Scheduler Role</h2>
<p>Create a new IAM role, and apply the pre-defined AWS role called <code>LambdaInvoke</code>. If you don't see that, this is the policy:</p>
<div class="highlight"><span class="filename">LambdaInvoke Policy</span><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Statement&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;Effect&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lambda:InvokeFunction&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;Resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;*&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Copy the ARN in the top right of the IAM role and add it as an environment variable. This is what gives permissions to the scheduler to call another Lambda.</p>
<p>And that's the gist of the first Lambda, <code>schedule-meeting</code>. Now let's set up API Gateway so that we can hit it.</p>
<hr />
<p><strong>Next: <a href="../api-gateway/">API Gateway and Testing </a></strong></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["search.suggest", "search.highlight", "content.code.copy", "content.tooltips"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>